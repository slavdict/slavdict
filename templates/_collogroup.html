{% load trim_spaces %}

<div style="line-height: 140%;">
    {% if cg.host_entry.has_meanings %}
        □<!-- &#x25A1; -->&nbsp;
    {% else %}
        ■<!-- &#x25A0; -->&nbsp;
    {% endif %}

    {% for c in cg.collocations %}

            <span class="cslav">{{ c.collocation_ucs }}</span>
            {% space %}

            {% if c.etymologies %}
                <span>(</span>
                {% for etym in c.etymologies %}
                    {% include '_etymology.html' %}
                {% endfor %}
                {% backspace %}){% space %}
            {% endif %}

            {% if not forloop.last %}
                {% backspace %},{% space %}
            {% endif %}

    {% endfor %}

    {% if cg.meanings or cg.metaph_meanings %}
        {% backspace %}&nbsp;&mdash;{% space %}
    {% endif %}



    {% if intermed %}

        <div class="edit-controls">

            <div>
                <a href="{% url UI:dictionary_collocationgroup_change cg.id %}">
                    <img src="{{ STATIC_URL }}pen.png" alt="" />
                    {% space %}
                    Редактировать словосочетания
                </a>
            </div>

            <div>
                <a href="{% if user.is_superuser %}{% url admin:dictionary_meaning_add %}{% else %}{% url UI:dictionary_meaning_add %}{% endif %}?collogroup={{ cg.id }}"
                   rel="prefetch">
                    <img src="{{ STATIC_URL }}plus.png" alt="" />
                    {% space %}
                    Добавить значение
                </a>
            </div>

        </div>

    {% endif %}



    <span>
        {% for m in cg.meanings %}

            {% if not cg.meanings|length_is:"1" %}
                {{ forloop.counter }}.{% space %}
            {% endif %}

            {% include '_meaning_with_children.html' %}

        {% endfor %}


        {% for m in cg.metaph_meanings %}

            <span style="color: #777;">►</span>
            {% include '_meaning_without_children.html' %}

        {% endfor %}
    </span>
</div>
