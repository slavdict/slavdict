{% macro example(e, examples_loop, peer_meanings_loop) %}

<example>{{ e.example_ucs|ind_cslav_words }}</example>
{{ space }}


{% if e.greek_equivs %}

    {% set COMMA = joiner(',') %}
    {% for ge in e.greek_equivs %}

        {% set ADDITIONAL_INFO = show_additional_info and ge.additional_info %}
        {% if ge.unitext or ADDITIONAL_INFO %}
            {{ backspace }}{{ COMMA() }}{{ space }}
        {% endif %}

        <greek>{{ ge.unitext }}</greek>
        {{ space }}

        {% for x in (ge.mark, ge.source, ge.note)|reject('equalto', '') %}

            {% if loop.first %}
                <text>[</text>
            {% else %} {{ backspace }},{{ space }}
            {% endif %}

            <i>{{ x }}</i>
            {{ space }}

            {% if loop.last %}
                {{ backspace }}<text>]</text>{{ space }}
            {% endif %}

        {% endfor %}

    {% endfor %}

{% endif %}

{% if e.note %}
    {{ space }}
    <example-note>{{ e.note|cslav_injection }}</example-note>
{% endif %}

{% if e.address_text %}
    <address>
        {{ e.address_text|cslav_injection }}
        {% if not examples_loop.last %}
            {{ backspace }};{{ space }}
        {% else %}
            {% if peer_meanings_loop.last or not parent_meanings_loop %}
                {{ backspace }}{{ onlyDot }}{{ space }}
            {% else %}
                {{ backspace }};{{ space }}
            {% endif %}
        {% endif %}
    </address>
{% endif %}


{% endmacro %}
{# vim: set ft=django.xml: #}
