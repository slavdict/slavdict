{% extends 'base--hdrSearch.html' %}

{% block header %}

    {{ super() }}
    {% if not intermed %}
        {{ space }}
        <a href="{% url switch_info_url %}"
           class="header--item{% if show_additional_info %} on{% endif %}">Инфо</a>
    {% endif %}

{% endblock %}


{% block content %}

    <nav class="tabs">
    <ul>
        <li class="current"><a href="#info">Справочная инфо</a></li>
        <li><a href="#etymology">Этимология</a></li>
        <li><a href="#meanings">Значения</a></li>
        <li><a href="#examples">Примеры</a></li>
        <li><a href="#constructions">Конструкции</a></li>
    </ul>
    </nav>

    <section id="info" class="tabcontent current">

        <div data-bind="text: data.entry.orthvars()[0].idem"></div>
        <input data-bind="value: data.entry.orthvars()[0].idem"/>

    </section>

    <section id="etymology" class="tabcontent">
    </section>

    <section id="meanings" class="tabcontent">
    </section>

    <section id="examples" class="tabcontent">
    </section>

    <section id="constructions" class="tabcontent">
    </section>

    <input type="button" value="Сохранить" data-bind="click: save"/>

{% endblock %}


{% block javascript_links %}

    {% include '_script.knockout.mapping.html' %}

{% endblock %}


{% block javascript %}

    {{ super() }}
    var data = {{ entry }};

    vM.entryEdit = {
        data: ko.mapping.fromJS(data),
        ui: {
            tabs: {}
        }
    };

    vM.entryEdit.save = function() {
        $.post('/entries/save/', {data: ko.mapping.toJSON(vM.entryEdit.data)});
    };

    ko.applyBindings(vM.entryEdit, $('#main').get(0));

    $('nav.tabs li').click(function(){
        $('nav.tabs li.current').removeClass('current');
        $('section.tabcontent.current').removeClass('current');
        var x = $(this);
        x.addClass('current');
        $(x.find('a').attr('href')).addClass('current');
    });

{% endblock %}
