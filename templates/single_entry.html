{% extends 'base--hdrSearch.html' %}

{% block header %}

    {{ super() }}
    {% if not intermed %}
        {{ space }}
        <a href="{{ url('switch_info_url') }}"
           class="header--item{% if show_additional_info %} on{% endif %}">Инфо</a>
    {% endif %}

{% endblock %}

{% block content %}

    {% if not intermed %}
        {% if not (user.preplock and entry.preplock)
              and (not entry.authors.exists() or user.is_admeditor
                   or user in entry.authors.all()) %}
            {% if not entry.duplicate or user.is_admeditor %}
            <div style="position: absolute; top: 5px; left: -45px;">
                <a class="icon edit"
                        href="{{ url('edit_form_url', args=[entry.pk]) }}"
                        title="Редактировать статью">
                    <img src="{{ STATIC_URL }}transparent.png" alt="изменить" />
                </a>
                <br />
                <a class="icon clippy"
                   data-clipboard-text="{{ entry.antconc_query|e }}"
                   title="Скопировать запрос для АнтКонка">
                    <img src="{{ STATIC_URL }}transparent.png" alt="v" />
                </a>
                {% if user.is_superuser %}
                <br />
                <a class="icon" href="/entries/{{ entry.pk }}/intermed/">
                    <img src="{{ STATIC_URL }}transparent.png" alt="изменить" />
                </a>
                {% endif %}
            </div>
            {% endif %}
        {% endif %}
    {% endif %}

    {% trim %}
        {% if intermed %}
            {% include 'web_old/entry.html' %}
        {% else %}
            {% include 'web/entry.html' %}
        {% endif %}
    {% endtrim %}

{% endblock %}

{% block javascript_links %}

    {{ super() }}

    {% include '_script.clipboardjs.html' %}
    {% include '_script.opentip.html' %}

    <script>
    jQuery(document).ready(function () {
        var otStyle = 'slavdictOpentip';
        Opentip.styles[otStyle] = { target: true, showOn: null,
            tipJoint: 'bottom center', hideOn: 'click', stem: false,
            removeElementsOnHide: true, hideEffectDuration: 2.5,
            stemLength: 12, stemBase: 15, background: '#fcf3d0',
            borderColor: '#e8d5b2'
        };
        var aqTip = new Opentip('.header',
                'Запрос для АнтКонка скопирован в буфер обмена.',
                { style: otStyle });
        $('a.icon.clippy').each(function () {
            var clipboard = new Clipboard(this);
            clipboard.on('success', function (event) {
                aqTip.show();
                aqTip.hide();
            });
        });
    });
    </script>

{% endblock %}
