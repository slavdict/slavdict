{% macro example(e, examples_loop, peer_meanings_loop) %}

<example>
    {{ e.example_ucs|ind_cslav_words("CSLSegment") }}
</example>{{ space }}

{% if e.greek_equivs %}

    {% set COMMA = joiner('<text aid:cstyle="Text">,</text>') %}
    {% for ge in e.greek_equivs %}

        {% set ADDITIONAL_INFO = show_additional_info and ge.additional_info %}
        {% if ge.unitext or ADDITIONAL_INFO %}
            {{ backspace }}{{ COMMA() }}{{ space }}
        {% endif %}

        <greek aid:cstyle="Greek">
            {{ ge.unitext }}
        </greek>{{ space }}

        {% for x in (ge.mark, ge.source, ge.note)|reject('equalto', '') %}

            {% if loop.first %}
                <text aid:cstyle="Text">[</text>
            {% else %}
                {{ backspace }}<text aid:cstyle="Text">,</text>{{ space }}
            {% endif %}

            <i aid:cstyle="Em">
                {{ x }}
            </i>{{ space }}

            {% if loop.last %}
               {{ backspace }}<text aid:cstyle="Text">]</text>{{ space }}
            {% endif %}

        {% endfor %}

    {% endfor %}

{% endif %}

{% if e.note %}
    {{ space }}
    <example-note>{{ e.note|ind_cslav_injection }}</example-note>
{% endif %}

{% if e.address_text %}
    <address aid:cstyle="Address">
        {{ e.address_text|ind_cslav_injection }}
    </address>
    <text aid:cstyle="Address">
        {% if not examples_loop.last %}
            {{ backspace }};
        {% else %}
            {% if peer_meanings_loop.last or not parent_meanings_loop %}
                {{ backspace }}{{ onlyDot }}
            {% else %}
                {{ backspace }};
            {% endif %}
        {% endif %}
    </text>
    {{ space }}

{% endif %}


{% endmacro %}
{# vim: set ft=django.xml: #}
