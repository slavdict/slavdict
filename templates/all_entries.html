{% extends 'base.html' %}

{% block shapka %}{% endblock %}

{% block content %}

{% if is_paged %}
    <style>
        .goodness label {
            font-size: 12px;
            padding: 5px;
            display: block;
            width: 50px;
            float: left;
        }
        .goodness label:first-child:hover {
            background-color: rgba(255,0,0,0.2);
        }
        .goodness label:nth-child(2n):hover {
            background-color: rgba(255,200,0,0.2);
        }
        .goodness label:nth-child(3n):hover {
            background-color: rgba(0,255,0,0.2);
        }
        .goodness:after {
            content: '';
            display: block;
            height: 20px;
            clear: both;
            margin-bottom: 140px;
        }
        .goodness.red { background-color: red }
    </style>
{% endif %}

    <style>
        @media print {
            div#main {
                column-count: 1;
                column-width: 11cm;
            }
            .FirstParagraph,
            .MeaningParagraph,
            .CollogroupParagraph,
            .CfParagraph {
                line-height: 0.9cm;
            }
        }

        .single_entry {
            position: relative;
        }

{% if hide_authors %}
        .author {
            display: none;
        }
{% endif %}

{% if show_sort_keys %}
        .all_entries {
            display: table;
        }
        .single_entry {
            position: relative;
            display: table-row;
            break-inside: avoid;
        }
        .Entry {
            display: table-cell;
            padding-bottom: 1em;
        }
        .sort_key,
        .sort_key_inverse {
            display: table-cell;
            padding: 0 2em 1.5em 0;
            letter-spacing: 0.05em;
        }
        .sort_key {
            text-align: left;
        }
        .sort_key_inverse {
            text-align: right;
        }
{% endif %}

    </style>


<script src="{{ STATIC_URL }}js/getCookie.js?{{ STATIC_RESOURCES_VERSION }}"
    type="application/javascript" charset="utf-8"></script>

<div{% if not is_paged and not not_editable %}
        contenteditable="true"
    {% endif %} class="all_entries">
    {% for entry in entries %}
        <div class="single_entry">

        {% if show_sort_keys %}
            <div class="{% if inverse_sort %}sort_key_inverse
                        {% else %}sort_key{% endif %}">
                {{ entry.civil_equivalent }}
            </div>
        {% endif %}

        {% if show_numbers %}
            <a href="/entries/{{ entry.id }}/" target="_blank"
                style="position: absolute; top: -27px; color: #369;">
                <span>[{{ loop.index }}-</span><b>{{ entry.id }}</b>]
            </a>
        {% endif %}

        {% include 'web/entry.html' %}

        {% if is_paged %}
            <div class="goodness">

                {% for goodness, goodness_text in (('b', '–'), ('s', '±'), ('g', '+')) %}

                    <label>
                        <input type="radio"
                            name="good{{ entry.id }}" value="{{ goodness }}"
                            onchange="
                                var self = this;
                                $.ajax({
                                    method: 'POST',
                                    url: '/json/goodness/save/',
                                    data: { id: {{ entry.id }},
                                            goodness: '{{ goodness }}' },
                                    beforeSend: function (request) {
                                        request.setRequestHeader('X-CSRFToken', csrftoken);
                                    },
                                    error: function () {
                                                $(self)
                                                    .parent()
                                                    .parent()
                                                    .addClass('red');
                                        }
                                });"
                            {% if entry.good == goodness %}checked{% endif %} />
                        {{ goodness_text }}
                    </label>

                {% endfor %}

            </div>
        {% endif %}

        </div>
    {% endfor %}

    {% if is_paged %}
        {% include '_pagination.html' %}
    {% endif %}
    </div>

    {% include '_script.Hyphenator.html' %}

{% endblock %}
