{% from 'indesign/collogroup.xml' import collogroup with context %}

{% if m.collogroups_non_phraseological %}
    {% if entry.is_part_of_speech('conjunction', 'letter') or
            meaning_with_collogroup_only %}
        {% if not m.examples and not m.child_meanings %}
            {% if m.meaning or m.gloss %}
                {{ backspace }};{{ space }}
            {% else %}
                {{ backspace }}{{ space }}
            {% endif %}
        {% else %}
            {% include 'indesign/separator.xml' %}
        {% endif %}
    {% else %}
        {% if m.examples or m.child_meanings %}
            {{ backspace }}</p>{{ newline }}
            <p aid:pstyle="CollogroupParagraph" aid:cstyle="Text">
        {% else %}
            {{ backspace }}{{ space }}
        {% endif %}
        <x aid:cstyle="Diamond">♢{# U+2662 #}</x>{{ nbsp }}
    {% endif %}
    {% for cg in m.collogroups_non_phraseological %}
        {{ collogroup(cg, loop) }}
    {% endfor %}
{% endif %}

{% if m.collogroups_phraseological %}
    {% if entry.is_part_of_speech('conjunction', 'letter') or
            meaning_with_collogroup_only and m.collogroups_non_phraseological %}
        {% if not m.examples and not m.child_meanings %}
            {% if m.meaning or m.gloss %}
                {{ backspace }};{{ space }}
            {% else %}
                {{ backspace }}{{ space }}
            {% endif %}
        {% else %}
            {% include 'indesign/separator.xml' %}
        {% endif %}
    {% else %}
        {% if m.examples or m.child_meanings or m.collogroups_non_phraseological %}
            {{ backspace }}</p>{{ newline }}
            <p aid:pstyle="CollogroupParagraph" aid:cstyle="Text">
        {% else %}
            {{ backspace }}{{ space }}
        {% endif %}
        <x aid:cstyle="Diamond">♦{# U+2666 #}</x>{{ nbsp }}
    {% endif %}
    {% for cg in m.collogroups_phraseological %}
        {{ collogroup(cg, loop) }}
    {% endfor %}
{% endif %}

{# vim: set ft=django.xml: #}
