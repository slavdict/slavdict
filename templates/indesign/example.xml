{% macro example(e, examples_loop, peer_meanings_loop) %}

<example>
    {{ e.example_ucs|ind_cslav_words("CSLSegment") }}
</example>{{ space }}

{% if e.greek_equivs %}
    {% for ge, genum in e.greek_equivs_with_numbers %}

        {% if not loop.first %}
            {{ backspace }},{{ space }}
        {% endif %}

        {% if ge.mark %}
            {{ backspace }}{{ space }}
            <x aid:cstyle="Em">{{ ge.mark }}</x>
            {{ space }}
        {% endif %}

        <greek aid:cstyle="Greek">
            {{ ge.unitext|
                    ind_regex("Text", '[\\(\\)]')|
                    ind_regex("Em", '[а-яА-Я\\.\\s]{2,}') }}
        </greek>

        {% if genum == 2 %}
            {{ backspace }}{{ nbsp }}(bis){{ space }}
        {% elif genum > 2 %}
            {{ backspace }}{{ nbsp }}({{ genum }}){{ space }}
        {% endif %}

        {% if ge.note %}
            {{ backspace }}{{ space }}
            <x aid:cstyle="Text">{{ ge.note|ind_regex("Em", 'букв\\.') }}</x>
            {{ space }}
        {% endif %}

    {% endfor %}
{% endif %}

{% if e.address_text %}
    {{ backspace }}{{ space }}
    <address aid:cstyle="Address">
        {{ e.address_text|ind_cslav_injection("CSLSegment") }}
    </address>
    <text aid:cstyle="Address">
        {% if not examples_loop.last %}
            {{ backspace }};
        {% else %}
            {% if peer_meanings_loop.last or not parent_meanings_loop %}
                {{ backspace }}{{ onlyDot }}
            {% else %}
                {{ backspace }};
            {% endif %}
        {% endif %}
    </text>
    {{ space }}

{% endif %}


{% endmacro %}
{# vim: set ft=django.xml: #}
