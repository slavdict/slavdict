{% macro example(e, examples_loop, peer_meanings_loop, parent_meanings_loop,
                    child_meanings) %}

{{ e.example_ucs|ind_cslav_words("CSLSegment") }}
{{ space }}

{% if e.greek_equivs %}
    {% for ge, genum in e.greek_equivs_with_numbers %}

        {% if not loop.first %}
            {{ backspace }},{{ space }}
        {% endif %}

        {% if ge.mark %}
            {{ backspace }}{{ space }}
            <x aid:cstyle="Em">{{ ge.mark }}</x>
            {{ space }}
        {% endif %}

        <x aid:cstyle="Greek">
            {{ ge.unitext|
                    ind_regex("Text", '[\\(\\)]')|
                    ind_regex("Em", '[а-яА-Я\\.\\s]{2,}') }}
        </x>

        {% if genum == 2 %}
            {{ backspace }}{{ nbsp }}(bis){{ space }}
        {% elif genum > 2 %}
            {{ backspace }}{{ nbsp }}({{ genum }}){{ space }}
        {% endif %}

        {% if ge.note %}
            {{ backspace }}{{ space }}
            <x aid:cstyle="Text">{{ ge.note|ind_regex("Em", 'букв\\.') }}</x>
            {{ space }}
        {% endif %}

    {% endfor %}
{% endif %}

{% if e.address_text %}
    {{ backspace }}{{ space }}
    <x aid:cstyle="Address">
        {{ e.address_text|ind_cslav_injection("CSLSegment") }}
    </x>
    <x aid:cstyle="Address">
        {% if not examples_loop.last %}
            {{ backspace }};
        {% elif child_meanings|length == 0 and
                (peer_meanings_loop.last or not parent_meanings_loop) %}
            {{ backspace }}{{ onlyDot }}
        {% endif %}
    </x>
    {{ space }}

{% endif %}


{% endmacro %}
{# vim: set ft=django.xml: #}
