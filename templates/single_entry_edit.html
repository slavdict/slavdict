{% extends 'base--hdrSearch.html' %}

{% block content %}
<div class="curtain"></div>

<div class="grid edit"
     ondblclick="
         var x = $(this);
         if (x.hasClass('grid-debug'))
             x.removeClass('grid-debug');
         else
             x.addClass('grid-debug');
     ">

    <div class="message antconsol" data-bind="text: data.entry.antconc_query,
        visible: data.entry.antconc_query"></div>

    <span data-bind="wax: ui.entry.headword, waxCss: 'headword cslav'"></span>
    <i data-bind="text: ui.entry.part_of_speech"></i>

    <div style="margin: 30px 0;">

        <label>Заглавное слово</label>
        <input type="text" data-bind="value: data.entry.orthvars()[0].idem,
            valueUpdate: 'afterkeydown'"/>
        <br/><br/>

        <label>Автор</label>
        <select data-bind="options: ui.choices.author,
            value: data.entry.author_ids, optionsText: 'name',
            optionsValue: 'id'">
        </select>
        <br/><br/>

        <label>Статус статьи</label>
        <select data-bind="options: ui.choices.entry_status,
            value: data.entry.status, optionsText: 'name',
            optionsValue: 'id'">
        </select>
        <br/><br/>

        <label>Примечание</label>
        <textarea data-bind="value: data.entry.additional_info,
            valueUpdate: 'afterkeydown'"></textarea>

    </div>

    {% trim %}
    {% include '_entryEdit_tabs.html' %}
    {% endtrim %}

    <input type="button" value="Закончить редактирование"
        data-bind="click: ui.showSaveDialogue.bind(null, true)" />

    <div class="modalContainer" style="display: none;"
        data-bind="visible: ui.meaningBeingEdited">
        <div class="modalBackground"></div>
        <div class="modal"
            data-bind="template: {
                            name: 'editMeaning',
                            data: ui.meaningBeingEdited,
                            if: ui.meaningBeingEdited }"></div>
    </div>

    <div class="modalContainer" style="display: none;"
        data-bind="visible: ui.showSaveDialogue">
        <div class="modalBackground"></div>
        <div class="modal"
            data-bind="template: {
                            name: 'saveDialogue',
                            if: ui.showSaveDialogue }"></div>
    </div>

</div>


{% endblock %}


{% block javascript_links %}

    <script src="{{ STATIC_URL }}js/hdrSearch.js"
        type="application/javascript" charset="utf-8"></script>

    <script src="{{ STATIC_URL }}js/libs/ac2ucs8.js"
        type="text/javascript" charset="utf-8"></script>

    {% include '_script.knockout.mapping.html' %}

    {% include '_script.knockout.sortable.html' %}

    <script>

        vM.dataToInitialize = {
            entry: {{ entry }},
            choices: {{ choices }},
            labels: {{ labels }},
            slugs: {{ slugs }}
        };

    </script>

    <script src="{{ STATIC_URL }}js/edit.js"
        type="application/javascript" charset="utf-8"></script>

{% endblock %}
